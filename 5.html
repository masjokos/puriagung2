import React, { useState, useEffect } from 'react';
import { 
  Users, UserPlus, LayoutGrid, UserSquare, LogOut, 
  Save, Camera, Search, RefreshCw, Eye, ShieldCheck, 
  ArrowLeft, X, Home, MapPin, Phone, Briefcase
} from 'lucide-react';

const App = () => {
  const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbz3qxTEDd47HifJz4bBQaRELeavO00j8-paFtgP3CeqId5DcAHTZeTZy3SQYAzwmEV1MQ/exec';
  
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  const [currentPage, setCurrentPage] = useState('dashboard');
  const [wargaData, setWargaData] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedWarga, setSelectedWarga] = useState(null);
  
  // Form States
  const [formFoto, setFormFoto] = useState(null);
  const [isAlamatSama, setIsAlamatSama] = useState(false);

  useEffect(() => {
    if (isLoggedIn) fetchWarga();
  }, [isLoggedIn]);

  const fetchWarga = async () => {
    setIsLoading(true);
    try {
      const res = await fetch(`${WEB_APP_URL}?action=getWarga&t=${Date.now()}`);
      const data = await res.json();
      setWargaData(Array.isArray(data) ? data : []);
    } catch (e) {
      console.error(e);
    } finally {
      setIsLoading(false);
    }
  };

  const handleLogin = (e) => {
    e.preventDefault();
    setIsLoggedIn(true);
  };

  const handleFileUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () => setFormFoto(reader.result);
      reader.readAsDataURL(file);
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    
    const formData = new FormData(e.target);
    const payload = {};
    formData.forEach((val, key) => payload[key] = val);
    payload.foto = formFoto || "-";

    try {
      const res = await fetch(WEB_APP_URL, {
        method: 'POST',
        body: JSON.stringify({ action: 'addWarga', payload })
      });
      const result = await res.json();
      if (result.success) {
        alert("Data berhasil disimpan ke Sheets & Foto tersimpan ke Drive!");
        e.target.reset();
        setFormFoto(null);
        setCurrentPage('dashboard');
        fetchWarga();
      } else {
        alert("Gagal: " + result.message);
      }
    } catch (err) {
      alert("Error koneksi!");
    } finally {
      setIsLoading(false);
    }
  };

  if (!isLoggedIn) {
    return (
      <div className="min-h-screen bg-[#1e1b4b] flex items-center justify-center p-4">
        <div className="bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl">
          <div className="text-center mb-8">
            <div className="w-16 h-16 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"><ShieldCheck size={32} /></div>
            <h1 className="text-2xl font-black text-slate-900">Sistem Warga</h1>
            <p className="text-slate-400 text-sm">Puri Agung 2</p>
          </div>
          <form onSubmit={handleLogin} className="space-y-4">
            <input type="text" placeholder="Username" className="w-full p-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 focus:ring-indigo-500" required />
            <input type="password" placeholder="Password" className="w-full p-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 focus:ring-indigo-500" required />
            <button className="w-full bg-indigo-600 text-white font-bold py-4 rounded-2xl hover:bg-indigo-700 transition">Masuk</button>
          </form>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-slate-50 flex flex-col lg:flex-row">
      {/* Sidebar Desktop */}
      <aside className="hidden lg:flex w-72 bg-white border-r border-slate-100 flex-col p-8 sticky top-0 h-screen">
        <div className="flex items-center gap-3 mb-10">
          <div className="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white"><Home size={24} /></div>
          <span className="font-extrabold text-xl">Puri Agung 2</span>
        </div>
        <nav className="space-y-2 flex-1">
          <NavBtn active={currentPage === 'dashboard'} onClick={() => setCurrentPage('dashboard')} icon={<LayoutGrid />} label="Beranda" />
          <NavBtn active={currentPage === 'dataWarga'} onClick={() => setCurrentPage('dataWarga')} icon={<Users />} label="Data Warga" />
          <NavBtn active={currentPage === 'kepalaKeluarga'} onClick={() => setCurrentPage('kepalaKeluarga')} icon={<UserSquare />} label="Kepala Keluarga" />
          <NavBtn active={currentPage === 'formWarga'} onClick={() => setCurrentPage('formWarga')} icon={<UserPlus />} label="Tambah Data" />
        </nav>
        <button onClick={() => setIsLoggedIn(false)} className="flex items-center gap-4 px-6 py-4 text-red-500 font-bold"><LogOut /> Keluar</button>
      </aside>

      {/* Main Content */}
      <main className="flex-1 pb-24 lg:pb-0">
        <header className="p-6 bg-white/80 backdrop-blur sticky top-0 z-40 border-b flex justify-between items-center">
          <h2 className="text-xl font-black text-slate-800 capitalize">{currentPage.replace(/([A-Z])/g, ' $1')}</h2>
          <button onClick={fetchWarga} className="p-2 bg-slate-100 rounded-full hover:rotate-180 transition-all duration-500"><RefreshCw size={20} className={isLoading ? 'animate-spin' : ''} /></button>
        </header>

        <div className="p-6">
          {currentPage === 'dashboard' && <Dashboard data={wargaData} />}
          {currentPage === 'dataWarga' && <DataWarga data={wargaData} searchTerm={searchTerm} setSearchTerm={setSearchTerm} onSelect={setSelectedWarga} />}
          {currentPage === 'kepalaKeluarga' && <KepalaKeluarga data={wargaData} />}
          {currentPage === 'formWarga' && (
            <FormWarga 
              onSubmit={handleSubmit} 
              onFileChange={handleFileUpload} 
              preview={formFoto}
              isAlamatSama={isAlamatSama}
              setIsAlamatSama={setIsAlamatSama}
            />
          )}
        </div>
      </main>

      {/* Bottom Nav Mobile */}
      <nav className="lg:hidden fixed bottom-0 inset-x-0 bg-white border-t p-3 flex justify-around rounded-t-3xl shadow-2xl z-50">
        <MobileNavBtn active={currentPage === 'dashboard'} onClick={() => setCurrentPage('dashboard')} icon={<LayoutGrid />} />
        <MobileNavBtn active={currentPage === 'dataWarga'} onClick={() => setCurrentPage('dataWarga')} icon={<Users />} />
        <div className="-mt-8">
           <button onClick={() => setCurrentPage('formWarga')} className="w-14 h-14 bg-indigo-600 text-white rounded-full flex items-center justify-center shadow-lg border-4 border-white"><UserPlus /></button>
        </div>
        <MobileNavBtn active={currentPage === 'kepalaKeluarga'} onClick={() => setCurrentPage('kepalaKeluarga')} icon={<UserSquare />} />
        <button onClick={() => setIsLoggedIn(false)} className="p-3 text-slate-400"><LogOut /></button>
      </nav>

      {/* Loading Overlay */}
      {isLoading && (
        <div className="fixed inset-0 bg-white/60 backdrop-blur-sm z-[100] flex flex-col items-center justify-center">
          <div className="w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mb-4"></div>
          <p className="font-bold text-indigo-600 animate-pulse">Sedang Memproses...</p>
        </div>
      )}

      {/* Modal Detail */}
      {selectedWarga && (
        <div className="fixed inset-0 z-[110] bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4" onClick={() => setSelectedWarga(null)}>
          <div className="bg-white w-full max-w-2xl rounded-[2.5rem] overflow-hidden shadow-2xl" onClick={e => e.stopPropagation()}>
            <div className="bg-indigo-600 p-6 text-white flex justify-between items-center">
              <h3 className="font-black text-lg">Detail Warga</h3>
              <button onClick={() => setSelectedWarga(null)} className="p-2 bg-white/10 rounded-full"><X /></button>
            </div>
            <div className="p-8 flex flex-col md:flex-row gap-8 overflow-y-auto max-h-[80vh]">
              <div className="w-full md:w-1/3 aspect-[3/4] bg-slate-100 rounded-3xl overflow-hidden shadow-inner">
                {selectedWarga.Foto && selectedWarga.Foto.startsWith('http') ? (
                  <img src={selectedWarga.Foto} className="w-full h-full object-cover" />
                ) : (
                  <div className="h-full flex items-center justify-center text-slate-300"><Users size={64} /></div>
                )}
              </div>
              <div className="flex-1 space-y-4">
                <DetailRow label="Nama" value={selectedWarga.Nama} />
                <DetailRow label="NIK" value={selectedWarga.NIK} />
                <DetailRow label="No KK" value={selectedWarga.No_KK || selectedWarga['No KK']} />
                <div className="grid grid-cols-2 gap-4">
                  <DetailRow label="RT" value={selectedWarga.RT} />
                  <DetailRow label="Blok/No" value={`${selectedWarga.Blok} / ${selectedWarga.Nomer}`} />
                </div>
                <DetailRow label="Alamat KTP" value={selectedWarga.Alamat_KTP || selectedWarga['Alamat KTP']} />
                <DetailRow label="HP" value={selectedWarga.No_HP || selectedWarga['No HP']} />
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

// --- Sub Components ---

const Dashboard = ({ data }) => {
  const stats = [
    { label: 'Total Warga', value: data.length, color: 'bg-blue-500', icon: <Users /> },
    { label: 'Laki-Laki', value: data.filter(w => w.Kelamin === 'Laki-Laki').length, color: 'bg-indigo-500', icon: <UserSquare /> },
    { label: 'Perempuan', value: data.filter(w => w.Kelamin === 'Perempuan').length, color: 'bg-pink-500', icon: <UserSquare /> },
    { label: 'Kepala Keluarga', value: data.filter(w => (w.Status_Keluarga || w['Status Hub Keluarga']) === 'Kepala Keluarga').length, color: 'bg-amber-500', icon: <ShieldCheck /> }
  ];

  return (
    <div className="space-y-6 animate-in fade-in slide-in-from-bottom-4">
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        {stats.map((s, i) => (
          <div key={i} className="bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100 flex items-center gap-4">
            <div className={`w-12 h-12 ${s.color} text-white rounded-2xl flex items-center justify-center`}>{s.icon}</div>
            <div>
              <p className="text-[10px] font-bold text-slate-400 uppercase leading-none mb-1">{s.label}</p>
              <h4 className="text-xl font-black text-slate-800">{s.value}</h4>
            </div>
          </div>
        ))}
      </div>
      
      {/* Quick Access Card */}
      <div className="bg-indigo-600 rounded-[2.5rem] p-8 text-white relative overflow-hidden shadow-xl">
        <div className="relative z-10">
          <h3 className="text-2xl font-black mb-2">Selamat Datang, Admin</h3>
          <p className="text-indigo-100 opacity-80 max-w-md mb-6">Kelola data warga Perumahan Puri Agung 2 dengan mudah dan cepat. Data tersinkronisasi secara real-time.</p>
        </div>
        <div className="absolute top-0 right-0 p-10 opacity-10"><Home size={180} /></div>
      </div>
    </div>
  );
};

const DataWarga = ({ data, searchTerm, setSearchTerm, onSelect }) => {
  const filtered = data.filter(w => 
    w.Nama?.toLowerCase().includes(searchTerm.toLowerCase()) || 
    String(w.NIK).includes(searchTerm)
  );

  return (
    <div className="space-y-4 animate-in fade-in">
      <div className="relative">
        <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" size={20} />
        <input 
          type="text" 
          placeholder="Cari Nama atau NIK..." 
          className="w-full pl-12 pr-4 py-4 bg-white rounded-2xl border border-slate-100 outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm"
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      <div className="bg-white rounded-[2rem] border border-slate-100 shadow-sm overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full text-left">
            <thead className="bg-slate-50 text-[10px] font-bold text-slate-400 uppercase tracking-wider">
              <tr>
                <th className="px-6 py-4">Warga</th>
                <th className="px-6 py-4">Blok / RT</th>
                <th className="px-6 py-4">HP</th>
                <th className="px-6 py-4">Aksi</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-slate-50">
              {filtered.map((w, i) => (
                <tr key={i} className="hover:bg-slate-50 transition-colors">
                  <td className="px-6 py-4">
                    <div className="flex items-center gap-3">
                      <div className="w-10 h-10 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center font-bold">{(w.Nama||"?")[0]}</div>
                      <div>
                        <p className="font-bold text-slate-800 leading-none mb-1">{w.Nama}</p>
                        <p className="text-[10px] text-slate-400 font-medium">{w.NIK}</p>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <p className="text-sm font-bold text-slate-700">Blok {w.Blok} No {w.Nomer}</p>
                    <p className="text-[10px] text-slate-400">RT {w.RT}</p>
                  </td>
                  <td className="px-6 py-4 text-sm text-slate-500 font-medium">{w.No_HP || w['No HP'] || '-'}</td>
                  <td className="px-6 py-4">
                    <button onClick={() => onSelect(w)} className="p-2 text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-600 hover:text-white transition-colors"><Eye size={18} /></button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  );
};

const FormWarga = ({ onSubmit, onFileChange, preview, isAlamatSama, setIsAlamatSama }) => {
  const [blok, setBlok] = useState('A');
  const [nomer, setNomer] = useState('');

  const generateAlamatOtomatis = () => `Blok ${blok} No. ${nomer}`;

  return (
    <form onSubmit={onSubmit} className="max-w-4xl mx-auto space-y-8 bg-white p-6 lg:p-10 rounded-[2.5rem] shadow-xl border border-slate-100 animate-in zoom-in-95 duration-300">
      <div className="flex items-center gap-4 pb-6 border-b border-slate-50">
        <div className="w-12 h-12 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center"><UserPlus /></div>
        <div>
          <h3 className="text-xl font-black text-slate-800">Formulir Pendaftaran Warga</h3>
          <p className="text-sm text-slate-400 font-medium leading-none mt-1">Lengkapi data untuk menambahkan ke basis data warga.</p>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
        {/* Kolom 1 */}
        <div className="space-y-4">
          <InputGroup label="Nama Lengkap" name="nama" placeholder="Sesuai KTP" required />
          <div className="grid grid-cols-2 gap-4">
            <InputGroup label="NIK" name="nik" type="number" placeholder="16 Digit" required />
            <InputGroup label="No KK" name="no_kk" type="number" placeholder="16 Digit" required />
          </div>
          <div className="grid grid-cols-2 gap-4">
            <SelectGroup label="Jenis Kelamin" name="kelamin" options={['Laki-Laki', 'Perempuan']} required />
            <SelectGroup label="Agama" name="agama" options={['Islam', 'Kristen', 'Katolik', 'Buddha', 'Hindu', 'Konghucu']} />
          </div>
          <div className="grid grid-cols-2 gap-4">
            <InputGroup label="Tempat Lahir" name="tempat_lahir" />
            <InputGroup label="Tanggal Lahir" name="tanggal_lahir" type="date" />
          </div>
          <SelectGroup label="Status Perkawinan" name="status_perkawinan" options={['Belum Kawin', 'Kawin', 'Cerai Hidup', 'Cerai Mati']} />
        </div>

        {/* Kolom 2 */}
        <div className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <SelectGroup label="Status Tinggal" name="status_tinggal" options={['Tetap', 'Kontrak', 'Kos', 'Lainnya']} />
            <SelectGroup label="Status Hub. Keluarga" name="status_keluarga" options={['Kepala Keluarga', 'Istri', 'Anak', 'Orang Tua', 'Lainnya']} />
          </div>
          <div className="grid grid-cols-3 gap-4">
            <SelectGroup 
              label="Blok" 
              name="blok" 
              options={['A','B','B1','C','D','E','F','G']} 
              value={blok}
              onChange={(e) => setBlok(e.target.value)}
            />
            <InputGroup 
              label="Nomer" 
              name="nomer" 
              placeholder="01" 
              value={nomer}
              onChange={(e) => setNomer(e.target.value)}
            />
            <SelectGroup label="RT" name="rt" options={['1','2','3','4']} />
          </div>
          
          <div className="space-y-1">
            <div className="flex justify-between items-center px-1">
              <label className="text-[10px] font-bold text-slate-500 uppercase tracking-wider">Alamat KTP</label>
              <label className="flex items-center gap-1.5 cursor-pointer">
                <input 
                  type="checkbox" 
                  checked={isAlamatSama} 
                  onChange={(e) => setIsAlamatSama(e.target.checked)}
                  className="w-3.5 h-3.5 accent-indigo-600 rounded" 
                />
                <span className="text-[10px] font-bold text-indigo-600">Sama dengan Blok/No</span>
              </label>
            </div>
            <textarea 
              name="alamat_ktp" 
              rows="2" 
              readOnly={isAlamatSama}
              value={isAlamatSama ? generateAlamatOtomatis() : undefined}
              className={`w-full p-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 focus:ring-indigo-500 text-sm ${isAlamatSama ? 'text-slate-400 font-medium' : ''}`}
              required
            ></textarea>
          </div>

          <div className="space-y-1">
            <label className="text-[10px] font-bold text-slate-500 uppercase tracking-wider px-1">Alamat Tinggal (Domisili)</label>
            <textarea name="alamat_tinggal" rows="2" className="w-full p-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 focus:ring-indigo-500 text-sm"></textarea>
          </div>

          <div className="grid grid-cols-2 gap-4">
             <InputGroup label="No HP" name="no_hp" type="tel" placeholder="08..." />
             <SelectGroup label="Pekerjaan" name="pekerjaan" options={['Belum/Tidak Bekerja', 'Mengurus Rumah Tangga', 'Pelajar/Mahasiswa', 'Pensiunan', 'PNS', 'TNI', 'POLRI', 'Karyawan Swasta', 'Wiraswasta', 'Petani', 'Nelayan']} />
          </div>
        </div>
      </div>

      {/* Upload Foto */}
      <div className="pt-4 flex flex-col items-center">
        <label className="w-full max-w-sm group cursor-pointer">
          <div className="flex flex-col items-center justify-center border-2 border-dashed border-slate-200 bg-slate-50 rounded-[2rem] p-8 hover:bg-indigo-50 hover:border-indigo-200 transition-all duration-300">
            {preview ? (
              <img src={preview} className="w-24 h-24 rounded-2xl object-cover shadow-lg border-4 border-white mb-2" />
            ) : (
              <Camera className="text-slate-400 group-hover:text-indigo-500 mb-2" size={40} />
            )}
            <p className="text-xs font-bold text-slate-500 group-hover:text-indigo-600 uppercase">{preview ? 'Ganti Foto' : 'Unggah Foto Warga'}</p>
            <p className="text-[10px] text-slate-400 mt-1">Otomatis tersimpan ke Google Drive</p>
          </div>
          <input type="file" className="hidden" accept="image/*" onChange={onFileChange} />
        </label>
      </div>

      <button type="submit" className="w-full bg-indigo-600 text-white font-bold py-5 rounded-[2rem] shadow-xl shadow-indigo-200 hover:bg-indigo-700 hover:-translate-y-1 transition-all active:scale-[0.98] flex items-center justify-center gap-3">
        <Save size={20} /> Simpan Data Warga Sekarang
      </button>
    </form>
  );
};

const KepalaKeluarga = ({ data }) => {
  const kkList = data.filter(w => (w.Status_Keluarga || w['Status Hub Keluarga']) === 'Kepala Keluarga');
  
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in">
      {kkList.map((w, i) => (
        <div key={i} className="bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-sm hover:shadow-xl hover:border-indigo-100 transition-all group">
          <div className="flex justify-between items-start mb-6">
            <div className="w-14 h-14 bg-indigo-600 text-white rounded-2xl flex items-center justify-center font-black text-xl shadow-lg shadow-indigo-100 group-hover:scale-110 transition-transform">{(w.Nama||"?")[0]}</div>
            <div className="flex flex-col items-end">
              <span className="px-3 py-1 bg-indigo-50 text-indigo-600 text-[10px] font-black rounded-full uppercase">Kepala Keluarga</span>
              <span className="text-[10px] text-slate-400 font-bold mt-1">RT {w.RT}</span>
            </div>
          </div>
          <h4 className="font-black text-slate-800 text-lg truncate mb-1">{w.Nama}</h4>
          <p className="text-xs text-slate-400 font-bold mb-6">Blok {w.Blok} No. {w.Nomer}</p>
          <div className="pt-4 border-t flex justify-between items-center text-slate-400">
             <div className="flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider"><MapPin size={12}/> Puri Agung 2</div>
             <div className="flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider"><Phone size={12}/> Hubungi</div>
          </div>
        </div>
      ))}
    </div>
  );
};

// --- Form Helpers ---
const InputGroup = ({ label, name, type = 'text', placeholder, required, value, onChange }) => (
  <div className="space-y-1">
    <label className="text-[10px] font-bold text-slate-500 uppercase tracking-wider px-1">{label}</label>
    <input 
      type={type} 
      name={name} 
      value={value}
      onChange={onChange}
      placeholder={placeholder} 
      className="w-full p-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 focus:ring-indigo-500 text-sm font-medium" 
      required={required} 
    />
  </div>
);

const SelectGroup = ({ label, name, options, required, value, onChange }) => (
  <div className="space-y-1">
    <label className="text-[10px] font-bold text-slate-500 uppercase tracking-wider px-1">{label}</label>
    <select 
      name={name} 
      value={value}
      onChange={onChange}
      className="w-full p-4 bg-slate-50 rounded-2xl border-none outline-none focus:ring-2 focus:ring-indigo-500 text-sm font-medium appearance-none" 
      required={required}
    >
      {options.map((opt, i) => <option key={i} value={opt}>{opt}</option>)}
    </select>
  </div>
);

const DetailRow = ({ label, value }) => (
  <div className="border-b border-slate-50 pb-2">
    <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">{label}</p>
    <p className="font-bold text-slate-800">{value || '-'}</p>
  </div>
);

const NavBtn = ({ active, onClick, icon, label }) => (
  <button 
    onClick={onClick}
    className={`w-full flex items-center gap-4 px-6 py-4 rounded-2xl font-bold transition-all ${active ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-100 scale-[1.02]' : 'text-slate-500 hover:bg-slate-50'}`}
  >
    {React.cloneElement(icon, { size: 20 })} {label}
  </button>
);

const MobileNavBtn = ({ active, onClick, icon }) => (
  <button 
    onClick={onClick} 
    className={`p-3 rounded-2xl transition-all ${active ? 'text-indigo-600 bg-indigo-50' : 'text-slate-400'}`}
  >
    {React.cloneElement(icon, { size: 24 })}
  </button>
);

export default App;
